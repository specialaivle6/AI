version: '3.8'

services:
  ai-service-dev:
    build: .
    image: solar-panel-ai:dev
    container_name: solar-ai-dev
    ports:
      - "8000:8000"
    environment:
      - LOG_LEVEL=DEBUG
      - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
      - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
      - AWS_DEFAULT_REGION=${AWS_DEFAULT_REGION}
    volumes:
      # ğŸ”¥ ì‹¤ì‹œê°„ ì½”ë“œ ë°˜ì˜
      - ./app:/app/app
      - ./logs:/app/logs
      - ./reports:/app/reports
    command: ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]
    restart: unless-stopped

# =====================================================
ì‚¬ìš©ë²•
# =====================================================
# í”„ë¡œë•ì…˜ ì‹¤í–‰
# docker-compose up -d

# ê°œë°œ í™˜ê²½ ì‹¤í–‰ (ì½”ë“œ ì‹¤ì‹œê°„ ë°˜ì˜)
# docker-compose -f docker-compose-dev.yml up -d

# ë¡œê·¸ í™•ì¸
# docker-compose logs -f ai-service

# ì¤‘ì§€
# docker-compose down